import{j as a,r as f}from"./index-bHt9Rxuy.js";import{r as m,u as j,f as S}from"./vendor-RwxSXxpb.js";import{u as r,a as A}from"./useLocaleValue-ePH2u21M.js";import{C as q}from"./index-MfS2d8qr.js";import{F as x,S as c,L as w}from"./constants-YPKEznJD.js";import{P as L,A as b}from"./api-JJFjqwOQ.js";const F="_div_main_qib1d_1",N="_div_arrow_qib1d_6",C="_div_question_qib1d_14",P="_div_result_qib1d_21",k="_expand_h_qib1d_1",E="_div_hint_qib1d_61",H="_div_answer_qib1d_68",T="_div_input_qib1d_81",$="_expand_v_qib1d_1",_={div_main:F,div_arrow:N,div_question:C,div_result:P,expand_h:k,div_hint:E,div_answer:H,div_input:T,expand_v:$},y=({list:s,value:e,onChangeValue:n})=>{const{getText:l}=r();return s===null&&(s=l("question.answerList")),a.jsx("div",{className:_.div_input,children:s==null?void 0:s.map((d,i)=>a.jsxs(m.Fragment,{children:[a.jsx("input",{id:`input_${i}`,type:"radio",value:i,checked:e===i,onChange:h=>n(Number(h.target.value))}),a.jsx("label",{htmlFor:`input_${i}`,children:d})]},d))})},R=({setAnswer:s,currentQuestion:e})=>{const[n,l]=m.useState(-1),{getText:d}=r(),i=()=>{s(n),l(-1)};return a.jsx(a.Fragment,{children:!(e!=null&&e.result)&&a.jsxs("div",{className:_.div_answer,children:[a.jsx(y,{list:e==null?void 0:e.answerList,value:n,onChangeValue:l}),a.jsx("div",{children:a.jsx(q,{width:"200px",backgroundColor:"var(--point-color)",fontSize:"1em",onClick:i,disabled:n===-1,children:d(n===-1?"question.selectAnswer":"question.answer")})})]})})},V=({currentQuestion:s})=>{const e=j(),{getText:n}=r(),[l,d]=m.useState(!1),i=()=>(s==null?void 0:s.finishedFlag)===x.failed?n("question.toHome"):n("question.toPortfolio"),h=()=>{const p=(s==null?void 0:s.finishedFlag)===x.done?f.portfolio:f.main;e(p)},o=(s==null?void 0:s.finishedFlag)!==x.none;return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:o?_.div_result:_.div_question,children:a.jsx("div",{children:o?a.jsxs("div",{children:[s==null?void 0:s.result,a.jsx(q,{margin:"20px auto 0 auto",width:"160px",fontSize:"0.6em",onClick:h,children:i()})]}):a.jsxs(a.Fragment,{children:[s==null?void 0:s.question,(s==null?void 0:s.hint)&&a.jsx("img",{src:"/assets/icon/info.svg",alt:"hint",onClick:()=>d(!0)})]})})}),!(s!=null&&s.result)&&a.jsx("div",{className:_.div_arrow}),l&&a.jsx(L,{closePopup:()=>d(!1),children:a.jsxs("div",{className:_.div_hint,children:[s==null?void 0:s.hint,a.jsx(q,{margin:"10px auto 0 auto",onClick:()=>d(!1),children:n("question.close")})]})})]})};class z extends b{async getQuestionList(e){return(await super.get(`/assets/data/${e}/question.json`)).data}}const B=()=>{const s=A(t=>t.setLocale),[e,n]=m.useState([{question:`언어를 선택해주세요.

Select the language.`,answer:null,result:null,questionSeq:0,finishedFlag:x.none,answerList:["한국어","Enlgish"]}]),[l,d]=m.useState(0),[i,h]=S(),o=e.find(t=>t.questionSeq===l);m.useEffect(()=>{const t=i.get(c.seq),v=i.get(c.lang);return t!==null&&v!==null&&(p(v),d(Number(t))),()=>{n([])}},[]);const p=async t=>{const g=await new z().getQuestionList(t);n(g),s(t)};return{currentQuestion:o,setAnswer:t=>{if(e.length===1){const g=t===0?w.kr:w.en;p(g),i.set(c.lang,`${g}`),h(i);return}const v=o.nextSeq[t];(o==null?void 0:o.finishedFlag)===x.none?i.set(c.seq,`${v}`):(i.delete(c.seq),i.delete(c.lang)),h(i),d(v)}}},U=()=>{const{currentQuestion:s,setAnswer:e}=B();return a.jsxs("div",{className:_.div_main,children:[a.jsx(V,{currentQuestion:s}),a.jsx(R,{currentQuestion:s,setAnswer:e})]})};export{U as default};
