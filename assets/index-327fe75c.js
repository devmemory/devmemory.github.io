import{r as v,c as q,j as a,u as S,b as w}from"./index-86c4bc48.js";import{C as g}from"./index-cf343ab2.js";import{a as A}from"./box.module-14340428.js";import{u as r}from"./useLocaleValue-38af4020.js";import{A as L,F as c,S as h,L as j,P as F}from"./index-92479e99.js";class N extends L{async getQuestionList(e){return(await super.get(`/assets/data/${e}/question.json`)).data}}const C=()=>{const s=A(t=>t.setLocale),[e,i]=v.useState([{question:`언어를 선택해주세요.

Select the language.`,answer:null,result:null,questionSeq:0,finishedFlag:c.none,answerList:["한국어","Enlgish"]}]),[d,l]=v.useState(0),[n,o]=q(),_=e.find(t=>t.questionSeq===d);v.useEffect(()=>{const t=n.get(h.seq),m=n.get(h.lang);return t!==null&&m!==null&&(p(m),l(Number(t))),()=>{i([])}},[]);const p=async t=>{const f=await new N().getQuestionList(t);i(f),s(t)};return{currentQuestion:_,setAnswer:t=>{if(e.length===1){const f=t===0?j.kr:j.en;p(f),n.set(h.lang,`${f}`),o(n);return}const m=_.nextSeq[t];(_==null?void 0:_.finishedFlag)===c.none?n.set(h.seq,`${m}`):(n.delete(h.seq),n.delete(h.lang)),o(n),l(m)}}},P="_div_main_1mxf0_1",k="_div_arrow_1mxf0_6",E="_div_question_1mxf0_15",b="_div_result_1mxf0_22",H="_expand_h_1mxf0_1",T="_div_hint_1mxf0_62",$="_div_answer_1mxf0_68",y="_div_input_1mxf0_81",R="_expand_v_1mxf0_1",x={div_main:P,div_arrow:k,div_question:E,div_result:b,expand_h:H,div_hint:T,div_answer:$,div_input:y,expand_v:R},V=({list:s,value:e,onChangeValue:i})=>{const{getText:d}=r();return s===null&&(s=d("question.answerList")),a.jsx("div",{className:x.div_input,children:s==null?void 0:s.map((l,n)=>a.jsxs(v.Fragment,{children:[a.jsx("input",{id:`input_${n}`,type:"radio",value:n,checked:e===n,onChange:o=>i(Number(o.target.value))}),a.jsx("label",{htmlFor:`input_${n}`,children:l})]},l))})},z=({setAnswer:s,currentQuestion:e})=>{const[i,d]=v.useState(-1),{getText:l}=r(),n=()=>{s(i),d(-1)};return a.jsx(a.Fragment,{children:!(e!=null&&e.result)&&a.jsxs("div",{className:x.div_answer,children:[a.jsx(V,{list:e==null?void 0:e.answerList,value:i,onChangeValue:o=>d(o)}),a.jsx("div",{children:a.jsx(g,{width:"200px",backgroundColor:"var(--point-color)",fontSize:"0.8em",onClick:n,disabled:i===-1,children:l(i===-1?"question.selectAnswer":"question.answer")})})]})})},B=({currentQuestion:s})=>{const e=S(),{getText:i}=r(),[d,l]=v.useState(!1),n=()=>(s==null?void 0:s.finishedFlag)===c.failed?i("question.toHome"):i("question.toPortfolio"),o=()=>{const p=(s==null?void 0:s.finishedFlag)===c.done?w.portfolio:w.main;e(p)},_=(s==null?void 0:s.finishedFlag)!==c.none;return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:_?x.div_result:x.div_question,children:a.jsx("div",{children:_?a.jsxs("div",{children:[s==null?void 0:s.result,a.jsx(g,{margin:"20px auto 0 auto",width:"160px",fontSize:"0.6em",onClick:o,children:n()})]}):a.jsxs(a.Fragment,{children:[s==null?void 0:s.question,(s==null?void 0:s.hint)&&a.jsx("img",{src:"/assets/icon/info.svg",alt:"hint",onClick:()=>l(!0)})]})})}),!(s!=null&&s.result)&&a.jsx("div",{className:x.div_arrow}),d&&a.jsx(F,{closePopup:()=>l(!1),children:a.jsxs("div",{className:x.div_hint,children:[s==null?void 0:s.hint,a.jsx(g,{margin:"10px auto 0 auto",onClick:()=>l(!1),children:i("question.close")})]})})]})},K=()=>{const{currentQuestion:s,setAnswer:e}=C();return a.jsxs("div",{className:x.div_main,children:[a.jsx(B,{currentQuestion:s}),a.jsx(z,{currentQuestion:s,setAnswer:e})]})};export{K as default};
