import{r as x,c as j,j as a,u as S,b as r}from"./index-d07585f8.js";import{C as q}from"./index-3e64e21f.js";import{a as b,F as m,S as c,L as w}from"./box.module-0820fa82.js";import{u as f}from"./useLocaleValue-85e11405.js";import{A,P as L}from"./index-f3cdcd65.js";class F extends A{async getQuestionList(e){return(await super.get(`/assets/data/${e}/question.json`)).data}}const N=()=>{const s=b(t=>t.setLocale),[e,n]=x.useState([{question:`언어를 선택해주세요.

Select the language.`,answer:null,result:null,questionSeq:0,finishedFlag:m.none,answerList:["한국어","Enlgish"]}]),[l,d]=x.useState(0),[i,o]=j(),_=e.find(t=>t.questionSeq===l);x.useEffect(()=>{const t=i.get(c.seq),v=i.get(c.lang);return t!==null&&v!==null&&(p(v),d(Number(t))),()=>{n([])}},[]);const p=async t=>{const g=await new F().getQuestionList(t);n(g),s(t)};return{currentQuestion:_,setAnswer:t=>{if(e.length===1){const g=t===0?w.kr:w.en;p(g),i.set(c.lang,`${g}`),o(i);return}const v=_.nextSeq[t];(_==null?void 0:_.finishedFlag)===m.none?i.set(c.seq,`${v}`):(i.delete(c.seq),i.delete(c.lang)),o(i),d(v)}}},C="_div_main_qib1d_1",P="_div_arrow_qib1d_6",k="_div_question_qib1d_14",E="_div_result_qib1d_21",H="_expand_h_qib1d_1",T="_div_hint_qib1d_61",$="_div_answer_qib1d_68",y="_div_input_qib1d_81",R="_expand_v_qib1d_1",h={div_main:C,div_arrow:P,div_question:k,div_result:E,expand_h:H,div_hint:T,div_answer:$,div_input:y,expand_v:R},V=({list:s,value:e,onChangeValue:n})=>{const{getText:l}=f();return s===null&&(s=l("question.answerList")),a.jsx("div",{className:h.div_input,children:s==null?void 0:s.map((d,i)=>a.jsxs(x.Fragment,{children:[a.jsx("input",{id:`input_${i}`,type:"radio",value:i,checked:e===i,onChange:o=>n(Number(o.target.value))}),a.jsx("label",{htmlFor:`input_${i}`,children:d})]},d))})},z=({setAnswer:s,currentQuestion:e})=>{const[n,l]=x.useState(-1),{getText:d}=f(),i=()=>{s(n),l(-1)};return a.jsx(a.Fragment,{children:!(e!=null&&e.result)&&a.jsxs("div",{className:h.div_answer,children:[a.jsx(V,{list:e==null?void 0:e.answerList,value:n,onChangeValue:o=>l(o)}),a.jsx("div",{children:a.jsx(q,{width:"200px",backgroundColor:"var(--point-color)",fontSize:"1em",onClick:i,disabled:n===-1,children:d(n===-1?"question.selectAnswer":"question.answer")})})]})})},B=({currentQuestion:s})=>{const e=S(),{getText:n}=f(),[l,d]=x.useState(!1),i=()=>(s==null?void 0:s.finishedFlag)===m.failed?n("question.toHome"):n("question.toPortfolio"),o=()=>{const p=(s==null?void 0:s.finishedFlag)===m.done?r.portfolio:r.main;e(p)},_=(s==null?void 0:s.finishedFlag)!==m.none;return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:_?h.div_result:h.div_question,children:a.jsx("div",{children:_?a.jsxs("div",{children:[s==null?void 0:s.result,a.jsx(q,{margin:"20px auto 0 auto",width:"160px",fontSize:"0.6em",onClick:o,children:i()})]}):a.jsxs(a.Fragment,{children:[s==null?void 0:s.question,(s==null?void 0:s.hint)&&a.jsx("img",{src:"/assets/icon/info.svg",alt:"hint",onClick:()=>d(!0)})]})})}),!(s!=null&&s.result)&&a.jsx("div",{className:h.div_arrow}),l&&a.jsx(L,{closePopup:()=>d(!1),children:a.jsxs("div",{className:h.div_hint,children:[s==null?void 0:s.hint,a.jsx(q,{margin:"10px auto 0 auto",onClick:()=>d(!1),children:n("question.close")})]})})]})},K=()=>{const{currentQuestion:s,setAnswer:e}=N();return a.jsxs("div",{className:h.div_main,children:[a.jsx(B,{currentQuestion:s}),a.jsx(z,{currentQuestion:s,setAnswer:e})]})};export{K as default};
