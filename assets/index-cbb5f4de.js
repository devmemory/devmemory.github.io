import{r as v,c as q,j as a,u as S,b as w}from"./index-fd31e8a6.js";import{C as g}from"./index-603229e7.js";import{a as A}from"./box.module-b4d81554.js";import{u as r}from"./useLocaleValue-4045e9a8.js";import{A as L,F as c,S as h,L as j}from"./api-4eb61f03.js";import{P as F}from"./index-b778c176.js";class N extends L{async getQuestionList(e){return(await super.get(`/assets/data/${e}/question.json`)).data}}const C=()=>{const s=A(t=>t.setLocale),[e,n]=v.useState([{question:`언어를 선택해주세요.

Select the language.`,answer:null,result:null,questionSeq:0,finishedFlag:c.none,answerList:["한국어","Enlgish"]}]),[o,l]=v.useState(0),[i,d]=q(),_=e.find(t=>t.questionSeq===o);v.useEffect(()=>{const t=i.get(h.seq),x=i.get(h.lang);return t!==null&&x!==null&&(p(x),l(Number(t))),()=>{n([])}},[]);const p=async t=>{const f=await new N().getQuestionList(t);n(f),s(t)};return{currentQuestion:_,setAnswer:t=>{if(e.length===1){const f=t===0?j.kr:j.en;p(f),i.set(h.lang,`${f}`),d(i);return}const x=_.nextSeq[t];(_==null?void 0:_.finishedFlag)===c.none?i.set(h.seq,`${x}`):(i.delete(h.seq),i.delete(h.lang)),d(i),l(x)}}},P="_div_main_1mxf0_1",k="_div_arrow_1mxf0_6",E="_div_question_1mxf0_15",b="_div_result_1mxf0_22",H="_expand_h_1mxf0_1",T="_div_hint_1mxf0_62",$="_div_answer_1mxf0_68",y="_div_input_1mxf0_81",R="_expand_v_1mxf0_1",m={div_main:P,div_arrow:k,div_question:E,div_result:b,expand_h:H,div_hint:T,div_answer:$,div_input:y,expand_v:R},V=({list:s,value:e,onChangeValue:n})=>{const{getText:o}=r();return s===null&&(s=o("question.answerList")),a.jsx("div",{className:m.div_input,children:s==null?void 0:s.map((l,i)=>a.jsxs(v.Fragment,{children:[a.jsx("input",{id:`input_${i}`,type:"radio",value:i,checked:e===i,onChange:d=>n(Number(d.target.value))}),a.jsx("label",{htmlFor:`input_${i}`,children:l})]},l))})},z=({setAnswer:s,currentQuestion:e})=>{const[n,o]=v.useState(-1),{getText:l}=r(),i=()=>{s(n),o(-1)};return a.jsx(a.Fragment,{children:!(e!=null&&e.result)&&a.jsxs("div",{className:m.div_answer,children:[a.jsx(V,{list:e==null?void 0:e.answerList,value:n,onChangeValue:d=>o(d)}),a.jsx("div",{children:a.jsx(g,{width:"200px",backgroundColor:"var(--point-color)",fontSize:"0.8em",onClick:i,disabled:n===-1,children:l(n===-1?"question.selectAnswer":"question.answer")})})]})})},B=({currentQuestion:s})=>{const e=S(),{getText:n}=r(),[o,l]=v.useState(!1),i=()=>(s==null?void 0:s.finishedFlag)===c.failed?n("question.toHome"):n("question.toPortfolio"),d=()=>{const p=(s==null?void 0:s.finishedFlag)===c.done?w.portfolio:w.main;e(p)},_=(s==null?void 0:s.finishedFlag)!==c.none;return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:_?m.div_result:m.div_question,children:a.jsx("div",{children:_?a.jsxs("div",{children:[s==null?void 0:s.result,a.jsx(g,{margin:"20px auto 0 auto",width:"160px",fontSize:"0.6em",onClick:d,children:i()})]}):a.jsxs(a.Fragment,{children:[s==null?void 0:s.question,(s==null?void 0:s.hint)&&a.jsx("img",{src:"/assets/icon/info.svg",alt:"hint",onClick:()=>l(!0)})]})})}),!(s!=null&&s.result)&&a.jsx("div",{className:m.div_arrow}),o&&a.jsx(F,{closePopup:()=>l(!1),children:a.jsxs("div",{className:m.div_hint,children:[s==null?void 0:s.hint,a.jsx(g,{margin:"10px auto 0 auto",onClick:()=>l(!1),children:n("question.close")})]})})]})},U=()=>{const{currentQuestion:s,setAnswer:e}=C();return a.jsxs("div",{className:m.div_main,children:[a.jsx(B,{currentQuestion:s}),a.jsx(z,{currentQuestion:s,setAnswer:e})]})};export{U as default};
